(this["webpackJsonpgoit-react-hw-09-phonebook"]=this["webpackJsonpgoit-react-hw-09-phonebook"]||[]).push([[0],{10:function(t,e,c){"use strict";c.d(e,"b",(function(){return k})),c.d(e,"a",(function(){return U})),c.d(e,"c",(function(){return L}));var n,r,a,s,o=c(2),u=Object(o.b)("auth/registerRequest"),i=Object(o.b)("auth/registerSuccess"),b=Object(o.b)("auth/registerError"),l=Object(o.b)("auth/loginRequest"),j=Object(o.b)("auth/loginSuccess"),d=Object(o.b)("auth/loginError"),O={registerRequest:u,registerSuccess:i,registerError:b,logoutRequest:Object(o.b)("auth/logoutRequest"),logoutSuccess:Object(o.b)("auth/logoutSuccess"),logoutError:Object(o.b)("auth/logoutError"),loginRequest:l,loginSuccess:j,loginError:d,getCurrentUserRequest:Object(o.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(o.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(o.b)("auth/getCurrentUserError")},f=c(4),h=c(7),p={name:null,email:null},g=Object(o.c)(p,(n={},Object(f.a)(n,O.registerSuccess,(function(t,e){return e.payload.user})),Object(f.a)(n,O.loginSuccess,(function(t,e){return e.payload.user})),Object(f.a)(n,O.logoutSuccess,(function(){return p})),Object(f.a)(n,O.getCurrentUserSuccess,(function(t,e){return e.payload})),n)),v=Object(o.c)(null,(r={},Object(f.a)(r,O.registerSuccess,(function(t,e){return e.payload.token})),Object(f.a)(r,O.loginSuccess,(function(t,e){return e.payload.token})),Object(f.a)(r,O.logoutSuccess,(function(){return null})),r)),m=function(t,e){return e.payload},x=Object(o.c)(null,(a={},Object(f.a)(a,O.registerError,m),Object(f.a)(a,O.loginError,m),Object(f.a)(a,O.logoutError,m),Object(f.a)(a,O.getCurrentUserError,m),a)),C=Object(o.c)(!1,(s={},Object(f.a)(s,O.registerSuccess,(function(){return!0})),Object(f.a)(s,O.loginSuccess,(function(){return!0})),Object(f.a)(s,O.getCurrentUserSuccess,(function(){return!0})),Object(f.a)(s,O.registerError,(function(){return!1})),Object(f.a)(s,O.loginError,(function(){return!1})),Object(f.a)(s,O.getCurrentUserError,(function(){return!1})),Object(f.a)(s,O.logoutSuccess,(function(){return!1})),s)),k=Object(h.b)({user:g,token:v,isAutenticated:C,error:x}),S=c(14),y=c.n(S),E=c(20),R=c(15),q=c.n(R);q.a.defaults.baseURL="https://connections-api.herokuapp.com";var w=function(t){q.a.defaults.headers.common.Authorization="Bearer ".concat(t)},A=function(){q.a.defaults.headers.common.Authorization=""},U={register:function(t){return function(){var e=Object(E.a)(y.a.mark((function e(c){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(O.registerRequest()),e.prev=1,e.next=4,q.a.post("https://connections-api.herokuapp.com/users/signup",t);case 4:n=e.sent,w(n.data.token),c(O.registerSuccess(n.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),c(O.registerError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logIn:function(t){return function(){var e=Object(E.a)(y.a.mark((function e(c){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(O.loginRequest()),e.prev=1,e.next=4,q.a.post("https://connections-api.herokuapp.com/users/login",t);case 4:n=e.sent,w(n.data.token),c(O.loginSuccess(n.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),c(O.loginError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logOut:function(){return function(){var t=Object(E.a)(y.a.mark((function t(e){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(O.logoutRequest()),t.prev=1,t.next=4,q.a.post("https://connections-api.herokuapp.com/users/logout");case 4:A(),e(O.logoutSuccess()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(O.logoutError(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var t=Object(E.a)(y.a.mark((function t(e,c){var n,r,a;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=c(),r=n.auth.token){t.next=3;break}return t.abrupt("return");case 3:return w(r),e(O.getCurrentUserRequest()),t.prev=5,t.next=8,q.a.get("https://connections-api.herokuapp.com/users/current");case 8:a=t.sent,e(O.getCurrentUserSuccess(a.data)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e(O.getCurrentUserError(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,c){return t.apply(this,arguments)}}()}},L={getIsAuthenticated:function(t){return t.auth.isAutenticated},getUsername:function(t){return t.auth.user.name}}},34:function(t,e,c){"use strict";c.d(e,"b",(function(){return p})),c.d(e,"d",(function(){return m})),c.d(e,"a",(function(){return h})),c.d(e,"c",(function(){return A}));var n,r=c(14),a=c.n(r),s=c(20),o=c(15),u=c.n(o),i=c(2),b=Object(i.b)("contacts/fetchContactsRequest"),l=Object(i.b)("contacts/fetchContactsSuccess"),j=Object(i.b)("contacts/fetchContactsError"),d=Object(i.b)("contacts/addContactSuccess"),O=Object(i.b)("contacts/addContactsError"),f=Object(i.b)("contacts/addContactRequest"),h={fetchContactsRequest:b,fetchContactsSuccess:l,fetchContactsError:j,changeFilter:Object(i.b)("contacts/filter"),addContactRequest:f,addContactSuccess:d,addContactsError:O,deleteContactSuccess:Object(i.b)("contacts/deleteContactSuccess"),deleteContactsError:Object(i.b)("contacts/deleteContactsError"),deleteContactRequest:Object(i.b)("contacts/deleteContactRequest")},p={submit:function(t){var e=t.name,c=t.number;return function(){var t=Object(s.a)(a.a.mark((function t(n){var r,s,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={name:e,number:c},n(h.addContactRequest()),t.prev=2,t.next=5,u.a.post("/contacts",r);case 5:s=t.sent,o=s.data,n(h.addContactSuccess(o)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),n(h.addContactsError(t.t0.message));case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()},deleteContact:function(t){return function(e){e(h.deleteContactRequest()),u.a.delete("/contacts/".concat(t)).then((function(){return e(h.deleteContactSuccess(t))})).catch((function(t){return e(h.deleteContactsError(t.message))}))}},fetchContacts:function(){return function(t){t(h.fetchContactsRequest()),u.a.get("/contacts").then((function(e){var c=e.data;return t(h.fetchContactsSuccess(c))})).catch((function(e){return t(h.fetchContactsError(e.message))}))}}},g=c(22),v=function(t){return t.contacts.filter},m={getValue:v,getVisibleContacts:Object(g.a)([v,function(t){return t.contacts.items}],(function(t,e){var c=t.toLowerCase();return e.filter((function(t){return t.name.toLowerCase().includes(c)}))}))},x=c(4),C=c(26),k=c(7),S=h.fetchContactsSuccess,y=h.addContactSuccess,E=h.deleteContactSuccess,R=h.changeFilter,q=Object(i.c)([],(n={},Object(x.a)(n,S,(function(t,e){return e.payload})),Object(x.a)(n,y,(function(t,e){var c=e.payload;return t.map((function(t){return t.name})).includes(c.name)?alert("".concat(c.name," is already in contacts.")):[c].concat(Object(C.a)(t))})),Object(x.a)(n,E,(function(t,e){var c=e.payload;return t.filter((function(t){return t.id!==c}))})),n)),w=Object(i.c)("",Object(x.a)({},R,(function(t,e){return e.payload}))),A=Object(k.b)({items:q,filter:w})},55:function(t,e,c){},86:function(t,e,c){},89:function(t,e,c){"use strict";c.r(e);var n=c(0),r=c.n(n),a=c(25),s=c.n(a),o=(c(55),c(56),c(6)),u=c(44),i=c(45),b=c(50),l=c(49),j=c(1),d=function(t){Object(b.a)(c,t);var e=Object(l.a)(c);function c(){return Object(u.a)(this,c),e.apply(this,arguments)}return Object(i.a)(c,[{key:"render",value:function(){return Object(j.jsx)("div",{className:"preloader",children:Object(j.jsxs)("div",{className:"preloader__row",children:[Object(j.jsx)("div",{className:"preloader__item"}),Object(j.jsx)("div",{className:"preloader__item"})]})})}}]),c}(n.Component),O=c(9),f=c(17),h="/",p="/register",g="/login",v="/contacts",m=c(10),x={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}};function C(){var t=Object(O.c)(m.c.getIsAuthenticated);return Object(j.jsxs)("nav",{children:[Object(j.jsx)(f.b,{to:h,exact:!0,style:x.link,activeStyle:x.activeLink,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),t&&Object(j.jsx)(f.b,{to:v,exact:!0,style:x.link,activeStyle:x.activeLink,children:"\u0417\u0430\u043c\u0435\u0442\u043a\u0438"})]})}var k=c.p+"static/media/default-avatar.e44fc4e2.png",S=c(91);function y(){var t=Object(O.b)(),e=Object(O.c)(m.c.getUsername),c=Object(n.useCallback)((function(){t(m.a.logOut())}),[t]);return Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("img",{src:k,alt:"",width:"32",className:"avatar"}),Object(j.jsxs)("span",{className:"name",children:["Welcome, ",e]}),Object(j.jsx)(S.a,{variant:"outline-success",type:"button",onClick:c,children:"Logout"})]})}var E={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},R=function(){return Object(j.jsxs)("div",{children:[Object(j.jsx)(f.b,{to:p,exact:!0,style:E.link,activeStyle:E.activeLink,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(j.jsx)(f.b,{to:g,exact:!0,style:E.link,activeStyle:E.activeLink,children:"\u041b\u043e\u0433\u0438\u043d"})]})};function q(){var t=Object(O.c)(m.c.getIsAuthenticated);return Object(j.jsxs)("header",{className:"Nav",children:[Object(j.jsx)(C,{}),t?Object(j.jsx)(y,{}):Object(j.jsx)(R,{})]})}c(86);var w=c(5),A=c(19),U=["component","isAuthenticated","redirectTo"];function L(t){var e=t.component,c=(t.isAuthenticated,t.redirectTo),n=Object(A.a)(t,U),r=Object(O.c)(m.c.getIsAuthenticated);return Object(j.jsx)(o.b,Object(w.a)(Object(w.a)({},n),{},{render:function(t){return r?Object(j.jsx)(e,Object(w.a)({},t)):Object(j.jsx)(o.a,{to:c})}}))}var N=["component","isAuthenticated","redirectTo"];function z(t){var e=t.component,c=(t.isAuthenticated,t.redirectTo),n=Object(A.a)(t,N),r=Object(O.c)(m.c.getIsAuthenticated);return Object(j.jsx)(o.b,Object(w.a)(Object(w.a)({},n),{},{render:function(t){return r&&n.restricted?Object(j.jsx)(o.a,{to:c}):Object(j.jsx)(e,Object(w.a)({},t))}}))}var I=Object(n.lazy)((function(){return c.e(6).then(c.bind(null,106))})),T=Object(n.lazy)((function(){return c.e(5).then(c.bind(null,107))})),_=Object(n.lazy)((function(){return c.e(4).then(c.bind(null,108))})),F=Object(n.lazy)((function(){return c.e(3).then(c.bind(null,109))}));function B(){var t=Object(O.b)();return Object(n.useEffect)((function(){t(m.a.getCurrentUser())}),[t]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(q,{}),Object(j.jsx)(n.Suspense,{fallback:Object(j.jsx)(d,{}),children:Object(j.jsxs)(o.d,{children:[Object(j.jsx)(z,{exact:!0,path:h,component:I}),Object(j.jsx)(z,{exact:!0,path:p,restricted:!0,redirectTo:"/contacts",component:T}),Object(j.jsx)(z,{path:g,restricted:!0,redirectTo:"/contacts",component:_}),Object(j.jsx)(L,{path:v,component:F,redirectTo:"/login"}),Object(j.jsx)(o.b,{component:I})]})})]})}var W=c(26),D=c(2),J=c(18),V=c(34),M=c(47),G=c.n(M),H=Object(W.a)(Object(D.d)({serializableCheck:{ignoredActions:[J.a,J.f,J.b,J.c,J.d,J.e]}})),K={key:"auth",storage:G.a,whitelist:["token"]},P=Object(D.a)({reducer:{contacts:V.c,auth:Object(J.g)(K,m.b)},middleware:H,devContacts:!1}),Q={store:P,persistor:Object(J.h)(P)},X=c(48);s.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(O.a,{store:Q.store,children:Object(j.jsx)(X.a,{loading:null,persistor:Q.persistor,children:Object(j.jsx)(f.a,{children:Object(j.jsx)(B,{})})})})}),document.getElementById("root"))}},[[89,1,2]]]);
//# sourceMappingURL=main.8dbbe518.chunk.js.map